<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=1440, initial-scale=1, user-scalable=no">
  <title>CoinRandomDefense v3.5</title>
  <link rel="stylesheet" as="style" crossorigin
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css" />
  <!-- ë„¤ì˜¤ë‘¥ê·¼ëª¨ í•œê¸€ í”½ì…€ í°íŠ¸ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/neodgm-webfont@latest/neodgm/style.css" />
  <link rel="stylesheet" href="/src/client/style.css">
  <link rel="stylesheet" href="/src/client/lobby-pro.css">
</head>

<body>
  <div id="game-scale-wrapper">
    <!-- PRO Lobby (ë™ì  ë Œë”ë§) -->
    <div id="lobby-pro" class="lobby-pro-root"></div>

    <!-- ê²°ê³¼ í™”ë©´ -->
    <div id="result-view" class="result-view hidden"></div>

    <div id="app" class="hidden">

      <!-- â•â•â• Column 1: Bench Sidebar â•â•â• -->
      <aside id="bench-panel">
        <div class="bench-header">
          <span>ğŸ“¦ ë²¤ì¹˜</span>
          <span class="bench-count" id="bench-count">0/9</span>
        </div>
        <div id="bench-slots"></div>
      </aside>

      <!-- â•â•â• Column 2: Main Column â•â•â• -->
      <div id="main-column">
        <!-- Top HUD Bar -->
        <header id="hud">
          <div class="hud-left">
            <div class="hud-pill">
              <span class="hud-label">ROUND</span>
              <span class="hud-value num" id="hud-round">0</span>
            </div>
            <div class="hud-hp-bar">
              <div class="hud-hp-fill" id="hud-hp-fill" style="width:100%"></div>
              <span class="hud-hp-text">â¤ï¸ <span id="hud-hp" class="num">30</span></span>
            </div>
          </div>
          <div class="hud-right">
            <div class="hud-pill gold-pill">
              <span class="hud-gold-icon">ğŸ’°</span>
              <span class="hud-value num" id="hud-gold">10</span>
            </div>
            <div class="hud-pill">
              <span class="hud-label">DPS</span>
              <span class="hud-value num" id="hud-dps">0</span>
            </div>
            <button id="btn-info" class="hud-icon-btn" title="ìœ ë‹› ì •ë³´">ğŸ“‹</button>
            <button id="btn-speed" class="hud-icon-btn speed-btn" title="ê²Œì„ ì†ë„">â–¶ 1x</button>
            <button id="btn-settings" class="hud-icon-btn" title="ì„¤ì •">âš™ï¸</button>
          </div>
        </header>

        <!-- Board Area -->
        <section id="board-section">
          <div id="map-wrapper">
            <!-- Monster outer path (rectangular loop) -->
            <div id="monster-path">
              <div id="path-start">â–¶ START</div>
            </div>
            <!-- Board grid (inside the path) -->
            <div id="board-grid"></div>
            <!-- Board count badge -->
            <div id="board-badge">
              <span>ğŸ—ºï¸</span>
              <span id="board-count">0/1</span>
            </div>
          </div>
        </section>

        <!-- Control Bar -->
        <div id="control-bar">
          <div class="cb-left">
            <div class="cb-level">
              <span class="cb-level-label">Lv</span>
              <span class="cb-level-value num" id="hud-level">1</span>
            </div>
            <div class="cb-xp">
              <div class="cb-xp-bar">
                <div class="cb-xp-fill" id="dock-xp-fill" style="width:0%"></div>
              </div>
              <span class="cb-xp-text num" id="hud-xp">0/2 XP</span>
            </div>
            <button id="btn-buy-xp" class="cb-btn cb-btn-xp">
              ğŸ“ˆ XP êµ¬ë§¤ <span class="cb-cost">4G</span>
            </button>
            <button id="btn-reroll" class="cb-btn">ğŸ”„ ë¦¬ë¡¤ <span class="cb-cost">2G</span></button>
            <button id="btn-lock" class="cb-btn cb-btn-lock">ğŸ”’ ì ê¸ˆ</button>
          </div>
          <div class="cb-right">
            <button id="btn-next-round" class="cb-btn cb-btn-combat">âš”ï¸ ì „íˆ¬ ì‹œì‘</button>
          </div>
        </div>

        <!-- Shop Card Bar -->
        <div id="shop-bar">
          <div id="shop-slots" class="shop-card-row"></div>
        </div>
      </div>

      <!-- â•â•â• Column 3: Right Panel â•â•â• -->
      <aside id="right-panel">
        <div id="synergy-section">
          <div class="panel-title">ğŸ§¬ ì‹œë„ˆì§€</div>
          <div style="font-size:11px;color:#f59e0b;padding:2px 8px;opacity:0.8">âš ï¸ ì§ì—… ì‹œë„ˆì§€: ë¹„í™œì„±í™” (ì—…ë°ì´íŠ¸ ì¤‘)</div>
          <div id="synergy-list"></div>
        </div>
        <div id="dps-section">
          <div class="dps-header">âš”ï¸ DPS</div>
          <div id="dps-list"></div>
        </div>
        <div id="log-panel">
          <div class="panel-title">ğŸ“œ ë¡œê·¸</div>
          <div id="log-content"></div>
        </div>
      </aside>
    </div>
    <script type="module" src="/src/main.ts"></script>

    <!-- Settings Modal -->
    <div id="settings-overlay" class="settings-overlay hidden">
      <div class="settings-modal">
        <h2>âš™ï¸ ì„¤ì •</h2>
        <div class="settings-group">
          <button id="settings-restart" class="settings-action-btn danger">ğŸ”„ ë‹¤ì‹œ ì‹œì‘</button>
          <button id="settings-pause" class="settings-action-btn">â¸ï¸ ì¼ì‹œì •ì§€</button>
        </div>
        <div class="settings-group">
          <label class="settings-label">ğŸ”Š íš¨ê³¼ìŒ</label>
          <input type="range" id="settings-sfx" min="0" max="100" value="80" class="settings-slider">
          <span id="settings-sfx-val">80%</span>
        </div>
        <div class="settings-group">
          <label class="settings-label">ğŸµ BGM</label>
          <input type="range" id="settings-bgm" min="0" max="100" value="60" class="settings-slider">
          <span id="settings-bgm-val">60%</span>
        </div>
        <button id="settings-close" class="settings-action-btn accent">âœ– ë‹«ê¸°</button>
      </div>
    </div>

    <!-- Game Over Modal -->
    <div id="game-over-overlay" class="game-over-overlay hidden">
      <div class="game-over-modal">
        <div class="game-over-header">
          <h1 id="game-over-title" class="game-over-title">ğŸ’€ GAME OVER</h1>
          <div id="game-over-subtitle" class="game-over-subtitle">ì²´ë ¥ì´ ëª¨ë‘ ì†Œì§„ë˜ì—ˆìŠµë‹ˆë‹¤</div>
        </div>

        <div class="game-over-stats">
          <div class="stat-card">
            <div class="stat-icon">ğŸ</div>
            <div class="stat-label">ìµœì¢… ë¼ìš´ë“œ</div>
            <div id="stat-final-round" class="stat-value">-</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">ğŸ’¸</div>
            <div class="stat-label">ì‚¬ìš©í•œ ê³¨ë“œ</div>
            <div id="stat-gold-spent" class="stat-value">-</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">ğŸ’</div>
            <div class="stat-label">ê³ ê¸‰ ìœ ë‹›</div>
            <div id="stat-premium-units" class="stat-value">-</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">âš”ï¸</div>
            <div class="stat-label">ìµœì¢… DPS</div>
            <div id="stat-final-dps" class="stat-value">-</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">ğŸ§¬</div>
            <div class="stat-label">í™œì„± ì‹œë„ˆì§€</div>
            <div id="stat-synergies" class="stat-value">-</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">â±ï¸</div>
            <div class="stat-label">í”Œë ˆì´ ì‹œê°„</div>
            <div id="stat-play-time" class="stat-value">-</div>
          </div>
        </div>

        <div class="game-over-units">
          <div class="units-label">ìµœì¢… ìœ ë‹›</div>
          <div id="game-over-unit-list" class="unit-list-display"></div>
        </div>

        <button id="btn-game-over-restart" class="game-over-restart-btn">ğŸ”„ ë‹¤ì‹œ ì‹œì‘</button>
      </div>
    </div>
  </div><!-- /game-scale-wrapper -->

  <script>
    (function () {
      var W = 1440, H = 810;
      var wr = document.getElementById('game-scale-wrapper');
      function fit() {
        var vw = window.innerWidth, vh = window.innerHeight;
        var s = Math.min(vw / W, vh / H);
        wr.style.transform = 'scale(' + s + ')';
        wr.style.left = ((vw - W * s) / 2) + 'px';
        wr.style.top = ((vh - H * s) / 2) + 'px';
      }
      window.addEventListener('resize', fit);
      window.addEventListener('orientationchange', function () { setTimeout(fit, 100); });
      fit();
    })();
  </script>
</body>

</html>